{"version":3,"sources":["createTabNavigator.js"],"names":["createTabNavigator","TabView","NavigationView","_renderScene","route","props","screenProps","descriptors","descriptor","key","TabComponent","getComponent","navigation","_renderIcon","focused","tintColor","horizontal","options","tabBarIcon","_getButtonComponent","tabBarButtonComponent","_getLabelText","tabBarLabel","title","routeName","_getAccessibilityLabel","tabBarAccessibilityLabel","label","routes","state","indexOf","length","_getTestID","tabBarTestID","_makeDefaultHandler","isFocused","hasOwnProperty","index","dispatch","StackActions","popToTop","emit","_jumpTo","_handleTabPress","_isTabPress","defaultHandler","tabBarOnPress","_handleTabLongPress","tabBarOnLongPress","_handleIndexChange","_handleSwipeStart","setState","isSwiping","_handleSwipeEnd","NavigationActions","navigate","navigationConfig","React","Component","config","router"],"mappings":"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","sourcesContent":["/* @flow */\n\nimport * as React from 'react';\nimport {\n  TabRouter,\n  StackActions,\n  SceneView,\n  createNavigator,\n  NavigationActions,\n} from '@react-navigation/core';\n\nexport type InjectedProps = {\n  getLabelText: (props: { route: any }) => any,\n  getAccessibilityLabel: (props: { route: any }) => string,\n  getTestID: (props: { route: any }) => string,\n  getButtonComponent: (props: { route: any }) => ?React.Component<*>,\n  renderIcon: (props: {\n    route: any,\n    focused: boolean,\n    tintColor: string,\n    horizontal: boolean,\n  }) => React.Node,\n  renderScene: (props: { route: any }) => ?React.Node,\n  onIndexChange: (index: number) => any,\n  onTabPress: (props: { route: any }) => mixed,\n  onTabLongPress: (props: { route: any }) => mixed,\n  navigation: any,\n  descriptors: any,\n  screenProps?: any,\n};\n\nexport default function createTabNavigator(TabView: React.ComponentType<*>) {\n  class NavigationView extends React.Component<*, *> {\n    _renderScene = ({ route }) => {\n      const { screenProps, descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const TabComponent = descriptor.getComponent();\n      return (\n        <SceneView\n          screenProps={screenProps}\n          navigation={descriptor.navigation}\n          component={TabComponent}\n        />\n      );\n    };\n\n    _renderIcon = ({\n      route,\n      focused = true,\n      tintColor,\n      horizontal = false,\n    }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const options = descriptor.options;\n\n      if (options.tabBarIcon) {\n        return typeof options.tabBarIcon === 'function'\n          ? options.tabBarIcon({ focused, tintColor, horizontal })\n          : options.tabBarIcon;\n      }\n\n      return null;\n    };\n\n    _getButtonComponent = ({ route }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const options = descriptor.options;\n\n      if (options.tabBarButtonComponent) {\n        return options.tabBarButtonComponent;\n      }\n\n      return null;\n    };\n\n    _getLabelText = ({ route }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const options = descriptor.options;\n\n      if (options.tabBarLabel) {\n        return options.tabBarLabel;\n      }\n\n      if (typeof options.title === 'string') {\n        return options.title;\n      }\n\n      return route.routeName;\n    };\n\n    _getAccessibilityLabel = ({ route }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const options = descriptor.options;\n\n      if (typeof options.tabBarAccessibilityLabel !== 'undefined') {\n        return options.tabBarAccessibilityLabel;\n      }\n\n      const label = this._getLabelText({ route });\n\n      if (typeof label === 'string') {\n        const { routes } = this.props.navigation.state;\n        return `${label}, tab, ${routes.indexOf(route) + 1} of ${\n          routes.length\n        }`;\n      }\n    };\n\n    _getTestID = ({ route }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const options = descriptor.options;\n\n      return options.tabBarTestID;\n    };\n\n    _makeDefaultHandler = ({ route, navigation }) => () => {\n      if (navigation.isFocused()) {\n        if (route.hasOwnProperty('index') && route.index > 0) {\n          // If current tab has a nested navigator, pop to top\n          navigation.dispatch(StackActions.popToTop({ key: route.key }));\n        } else {\n          navigation.emit('refocus');\n        }\n      } else {\n        this._jumpTo(route.routeName);\n      }\n    };\n\n    _handleTabPress = ({ route }) => {\n      this._isTabPress = true;\n\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const { navigation, options } = descriptor;\n\n      const defaultHandler = this._makeDefaultHandler({ route, navigation });\n\n      if (options.tabBarOnPress) {\n        options.tabBarOnPress({ navigation, defaultHandler });\n      } else {\n        defaultHandler();\n      }\n    };\n\n    _handleTabLongPress = ({ route }) => {\n      const { descriptors } = this.props;\n      const descriptor = descriptors[route.key];\n      const { navigation, options } = descriptor;\n\n      const defaultHandler = this._makeDefaultHandler({ route, navigation });\n\n      if (options.tabBarOnLongPress) {\n        options.tabBarOnLongPress({ navigation, defaultHandler });\n      } else {\n        defaultHandler();\n      }\n    };\n\n    _handleIndexChange = index => {\n      if (this._isTabPress) {\n        this._isTabPress = false;\n        return;\n      }\n\n      this._jumpTo(this.props.navigation.state.routes[index].routeName);\n    };\n\n    _handleSwipeStart = () => {\n      this.setState({ isSwiping: true });\n    };\n\n    _handleSwipeEnd = () => {\n      this.setState({ isSwiping: false });\n    };\n\n    _jumpTo = routeName =>\n      this.props.navigation.dispatch(NavigationActions.navigate({ routeName }));\n\n    _isTabPress: boolean = false;\n\n    render() {\n      const { descriptors, navigation, screenProps } = this.props;\n      const { state } = navigation;\n      const route = state.routes[state.index];\n      const descriptor = descriptors[route.key];\n      const options = {\n        ...this.props.navigationConfig,\n        ...descriptor.options,\n      };\n\n      return (\n        <TabView\n          {...options}\n          getLabelText={this._getLabelText}\n          getButtonComponent={this._getButtonComponent}\n          getAccessibilityLabel={this._getAccessibilityLabel}\n          getTestID={this._getTestID}\n          renderIcon={this._renderIcon}\n          renderScene={this._renderScene}\n          onIndexChange={this._handleIndexChange}\n          onTabPress={this._handleTabPress}\n          onTabLongPress={this._handleTabLongPress}\n          navigation={navigation}\n          descriptors={descriptors}\n          screenProps={screenProps}\n        />\n      );\n    }\n  }\n\n  return (routes: *, config: * = {}) => {\n    const router = TabRouter(routes, config);\n    return createNavigator(NavigationView, router, config);\n  };\n}\n"]}