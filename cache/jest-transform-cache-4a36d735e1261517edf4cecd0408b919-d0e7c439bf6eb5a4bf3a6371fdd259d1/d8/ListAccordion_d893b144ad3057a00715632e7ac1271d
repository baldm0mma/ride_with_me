70ea10e008585d7ac038306a2ce7b370
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _color = _interopRequireDefault(require("color"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _TouchableRipple = _interopRequireDefault(require("../TouchableRipple"));

var _Icon = _interopRequireDefault(require("../Icon"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _theming = require("../../core/theming");

var ListAccordion = function (_React$Component) {
  (0, _inherits2.default)(ListAccordion, _React$Component);

  function ListAccordion() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, ListAccordion);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(ListAccordion)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this.state = {
      expanded: _this.props.expanded || false
    };

    _this._handlePress = function () {
      _this.props.onPress && _this.props.onPress();

      if (_this.props.expanded === undefined) {
        _this.setState(function (state) {
          return {
            expanded: !state.expanded
          };
        });
      }
    };

    return _this;
  }

  (0, _createClass2.default)(ListAccordion, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          left = _this$props.left,
          title = _this$props.title,
          description = _this$props.description,
          children = _this$props.children,
          theme = _this$props.theme,
          titleStyle = _this$props.titleStyle,
          descriptionStyle = _this$props.descriptionStyle,
          style = _this$props.style;
      var titleColor = (0, _color.default)(theme.colors.text).alpha(0.87).rgb().string();
      var descriptionColor = (0, _color.default)(theme.colors.text).alpha(0.54).rgb().string();
      var expanded = this.props.expanded !== undefined ? this.props.expanded : this.state.expanded;
      return React.createElement(_reactNative.View, null, React.createElement(_TouchableRipple.default, {
        style: [styles.container, style],
        onPress: this._handlePress,
        accessibilityTraits: "button",
        accessibilityComponentType: "button",
        accessibilityRole: "button"
      }, React.createElement(_reactNative.View, {
        style: styles.row,
        pointerEvents: "none"
      }, left ? left({
        color: expanded ? theme.colors.primary : descriptionColor
      }) : null, React.createElement(_reactNative.View, {
        style: [styles.item, styles.content]
      }, React.createElement(_Text.default, {
        numberOfLines: 1,
        style: [styles.title, {
          color: expanded ? theme.colors.primary : titleColor
        }, titleStyle]
      }, title), description && React.createElement(_Text.default, {
        numberOfLines: 2,
        style: [styles.description, {
          color: descriptionColor
        }, descriptionStyle]
      }, description)), React.createElement(_reactNative.View, {
        style: [styles.item, description && styles.multiline]
      }, React.createElement(_Icon.default, {
        source: expanded ? 'keyboard-arrow-up' : 'keyboard-arrow-down',
        color: titleColor,
        size: 24
      })))), expanded ? React.Children.map(children, function (child) {
        if (left && React.isValidElement(child) && !child.props.left && !child.props.right) {
          return React.cloneElement(child, {
            style: [styles.child, child.props.style]
          });
        }

        return child;
      }) : null);
    }
  }]);
  return ListAccordion;
}(React.Component);

ListAccordion.displayName = 'List.Accordion';

var styles = _reactNative.StyleSheet.create({
  container: {
    padding: 8
  },
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  multiline: {
    height: 40,
    alignItems: 'center',
    justifyContent: 'center'
  },
  title: {
    fontSize: 16
  },
  description: {
    fontSize: 14
  },
  item: {
    margin: 8
  },
  child: {
    paddingLeft: 64
  },
  content: {
    flex: 1,
    justifyContent: 'center'
  }
});

var _default = (0, _theming.withTheme)(ListAccordion);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpc3RBY2NvcmRpb24uanMiXSwibmFtZXMiOlsiTGlzdEFjY29yZGlvbiIsInN0YXRlIiwiZXhwYW5kZWQiLCJwcm9wcyIsIl9oYW5kbGVQcmVzcyIsIm9uUHJlc3MiLCJ1bmRlZmluZWQiLCJzZXRTdGF0ZSIsImxlZnQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2hpbGRyZW4iLCJ0aGVtZSIsInRpdGxlU3R5bGUiLCJkZXNjcmlwdGlvblN0eWxlIiwic3R5bGUiLCJ0aXRsZUNvbG9yIiwiY29sb3JzIiwidGV4dCIsImFscGhhIiwicmdiIiwic3RyaW5nIiwiZGVzY3JpcHRpb25Db2xvciIsInN0eWxlcyIsImNvbnRhaW5lciIsInJvdyIsImNvbG9yIiwicHJpbWFyeSIsIml0ZW0iLCJjb250ZW50IiwibXVsdGlsaW5lIiwiUmVhY3QiLCJDaGlsZHJlbiIsIm1hcCIsImNoaWxkIiwiaXNWYWxpZEVsZW1lbnQiLCJyaWdodCIsImNsb25lRWxlbWVudCIsIkNvbXBvbmVudCIsImRpc3BsYXlOYW1lIiwiU3R5bGVTaGVldCIsImNyZWF0ZSIsInBhZGRpbmciLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsImhlaWdodCIsImp1c3RpZnlDb250ZW50IiwiZm9udFNpemUiLCJtYXJnaW4iLCJwYWRkaW5nTGVmdCIsImZsZXgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7SUE0R01BLGE7Ozs7Ozs7Ozs7Ozs7OztVQUdKQyxLLEdBQVE7QUFDTkMsTUFBQUEsUUFBUSxFQUFFLE1BQUtDLEtBQUwsQ0FBV0QsUUFBWCxJQUF1QjtBQUQzQixLOztVQUlSRSxZLEdBQWUsWUFBTTtBQUNuQixZQUFLRCxLQUFMLENBQVdFLE9BQVgsSUFBc0IsTUFBS0YsS0FBTCxDQUFXRSxPQUFYLEVBQXRCOztBQUVBLFVBQUksTUFBS0YsS0FBTCxDQUFXRCxRQUFYLEtBQXdCSSxTQUE1QixF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O0FBQ1hxQyxJQUFBQSxRQUFRLEVBQUU7QUFEQyxHQWhCa0I7QUFtQi9CbkIsRUFBQUEsSUFBSSxFQUFFO0FBQ0pvQixJQUFBQSxNQUFNLEVBQUU7QUFESixHQW5CeUI7QUFzQi9CZCxFQUFBQSxLQUFLLEVBQUU7QUFDTGUsSUFBQUEsV0FBVyxFQUFFO0FBRFIsR0F0QndCO0FBeUIvQnBCLEVBQUFBLE9BQU8sRUFBRTtBQUNQcUIsSUFBQUEsSUFBSSxFQUFFLENBREM7QUFFUEosSUFBQUEsY0FBYyxFQUFFO0FBRlQ7QUF6QnNCLENBQWxCLENBQWY7O2VBK0JlLHdCQUFVOUMsYUFBVixDIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFZpZXcsIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IFRvdWNoYWJsZVJpcHBsZSBmcm9tICcuLi9Ub3VjaGFibGVSaXBwbGUnO1xuaW1wb3J0IEljb24gZnJvbSAnLi4vSWNvbic7XG5pbXBvcnQgVGV4dCBmcm9tICcuLi9UeXBvZ3JhcGh5L1RleHQnO1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnLi4vLi4vY29yZS90aGVtaW5nJztcbmltcG9ydCB0eXBlIHsgVGhlbWUgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7XG4gIFZpZXdTdHlsZVByb3AsXG4gIFRleHRTdHlsZVByb3AsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS9MaWJyYXJpZXMvU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcblxudHlwZSBQcm9wcyA9IHt8XG4gIC8qKlxuICAgKiBUaXRsZSB0ZXh0IGZvciB0aGUgbGlzdCBhY2NvcmRpb24uXG4gICAqL1xuICB0aXRsZTogUmVhY3QuTm9kZSxcbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIHRleHQgZm9yIHRoZSBsaXN0IGFjY29yZGlvbi5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogUmVhY3QuTm9kZSxcbiAgLyoqXG4gICAqIENhbGxiYWNrIHdoaWNoIHJldHVybnMgYSBSZWFjdCBlbGVtZW50IHRvIGRpc3BsYXkgb24gdGhlIGxlZnQgc2lkZS5cbiAgICovXG4gIGxlZnQ/OiAocHJvcHM6IHsgY29sb3I6IHN0cmluZyB9KSA9PiBSZWFjdC5Ob2RlLFxuICAvKipcbiAgICogV2hldGhlciB0aGUgYWNjb3JkaW9uIGlzIGV4cGFuZGVkXG4gICAqIElmIHRoaXMgcHJvcCBpcyBwcm92aWRlZCwgdGhlIGFjY29yZGlvbiB3aWxsIGJlaGF2ZSBhcyBhIFwiY29udHJvbGxlZCBjb21wb25lbnRcIi5cbiAgICogWW91J2xsIG5lZWQgdG8gdXBkYXRlIHRoaXMgcHJvcCB3aGVuIHlvdSB3YW50IHRvIHRvZ2dsZSB0aGUgY29tcG9uZW50IG9yIG9uIGBvblByZXNzYC5cbiAgICovXG4gIGV4cGFuZGVkPzogYm9vbGVhbixcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUgb24gcHJlc3MuXG4gICAqL1xuICBvblByZXNzPzogKCkgPT4gbWl4ZWQsXG4gIC8qKlxuICAgKiBDb250ZW50IG9mIHRoZSBzZWN0aW9uLlxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0Lk5vZGUsXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHRoZW1lOiBUaGVtZSxcbiAgLyoqXG4gICAqIFN0eWxlIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSB3cmFwcGluZyBUb3VjaGFibGVSaXBwbGUgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIFN0eWxlIHRoYXQgaXMgcGFzc2VkIHRvIFRpdGxlIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZVN0eWxlPzogVGV4dFN0eWxlUHJvcCxcbiAgLyoqXG4gICAqIFN0eWxlIHRoYXQgaXMgcGFzc2VkIHRvIERlc2NyaXB0aW9uIGVsZW1lbnQuXG4gICAqL1xuICBkZXNjcmlwdGlvblN0eWxlPzogVGV4dFN0eWxlUHJvcCxcbnx9O1xuXG50eXBlIFN0YXRlID0ge1xuICBleHBhbmRlZDogYm9vbGVhbixcbn07XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCB0byBkaXNwbGF5IGFuIGV4cGFuZGFibGUgbGlzdCBpdGVtLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90c1wiPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMS5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMi5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMy5wbmdcIiAvPlxuICogPC9kaXY+XG4gKlxuICogIyMgVXNhZ2VcbiAqIGBgYGpzXG4gKiBpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBMaXN0LCBDaGVja2JveCB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XG4gKlxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICogICBzdGF0ZSA9IHtcbiAqICAgICBleHBhbmRlZDogdHJ1ZVxuICogICB9XG4gKlxuICogICBfaGFuZGxlUHJlc3MgPSAoKSA9PlxuICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICogICAgICAgZXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmV4cGFuZGVkXG4gKiAgICAgfSk7XG4gKlxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxMaXN0LlNlY3Rpb24gdGl0bGU9XCJBY2NvcmRpb25zXCI+XG4gKiAgICAgICAgIDxMaXN0LkFjY29yZGlvblxuICogICAgICAgICAgIHRpdGxlPVwiVW5jb250cm9sbGVkIEFjY29yZGlvblwiXG4gKiAgICAgICAgICAgbGVmdD17cHJvcHMgPT4gPExpc3QuSWNvbiB7Li4ucHJvcHN9IGljb249XCJmb2xkZXJcIiAvPn1cbiAqICAgICAgICAgPlxuICogICAgICAgICAgIDxMaXN0Lkl0ZW0gdGl0bGU9XCJGaXJzdCBpdGVtXCIgLz5cbiAqICAgICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiU2Vjb25kIGl0ZW1cIiAvPlxuICogICAgICAgICA8L0xpc3QuQWNjb3JkaW9uPlxuICpcbiAqICAgICAgICAgPExpc3QuQWNjb3JkaW9uXG4gKiAgICAgICAgICAgdGl0bGU9XCJDb250cm9sbGVkIEFjY29yZGlvblwiXG4gKiAgICAgICAgICAgbGVmdD17cHJvcHMgPT4gPExpc3QuSWNvbiB7Li4ucHJvcHN9IGljb249XCJmb2xkZXJcIiAvPn1cbiAqICAgICAgICAgICBleHBhbmRlZD17dGhpcy5zdGF0ZS5leHBhbmRlZH1cbiAqICAgICAgICAgICBvblByZXNzPXt0aGlzLl9oYW5kbGVQcmVzc31cbiAqICAgICAgICAgPlxuICogICAgICAgICAgIDxMaXN0Lkl0ZW0gdGl0bGU9XCJGaXJzdCBpdGVtXCIgLz5cbiAqICAgICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiU2Vjb25kIGl0ZW1cIiAvPlxuICogICAgICAgICA8L0xpc3QuQWNjb3JkaW9uPlxuICogICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IE15Q29tcG9uZW50O1xuICogYGBgXG4gKi9cbmNsYXNzIExpc3RBY2NvcmRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdMaXN0LkFjY29yZGlvbic7XG5cbiAgc3RhdGUgPSB7XG4gICAgZXhwYW5kZWQ6IHRoaXMucHJvcHMuZXhwYW5kZWQgfHwgZmFsc2UsXG4gIH07XG5cbiAgX2hhbmRsZVByZXNzID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLmV4cGFuZGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIG9mIHRoZSBgZXhwYW5kZWRgIHByb3Agd2FzIG5vdCBwYXNzZWRcbiAgICAgIC8vIElmIGl0IHdhcyBwYXNzZWQsIHRoZSBjb21wb25lbnQgd2lsbCBhY3QgYXMgYSBjb250cm9sbGVkIGNvbXBvbmVudFxuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICBleHBhbmRlZDogIXN0YXRlLmV4cGFuZGVkLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGVmdCxcbiAgICAgIHRpdGxlLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHRoZW1lLFxuICAgICAgdGl0bGVTdHlsZSxcbiAgICAgIGRlc2NyaXB0aW9uU3R5bGUsXG4gICAgICBzdHlsZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB0aXRsZUNvbG9yID0gY29sb3IodGhlbWUuY29sb3JzLnRleHQpXG4gICAgICAuYWxwaGEoMC44NylcbiAgICAgIC5yZ2IoKVxuICAgICAgLnN0cmluZygpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uQ29sb3IgPSBjb2xvcih0aGVtZS5jb2xvcnMudGV4dClcbiAgICAgIC5hbHBoYSgwLjU0KVxuICAgICAgLnJnYigpXG4gICAgICAuc3RyaW5nKCk7XG5cbiAgICBjb25zdCBleHBhbmRlZCA9XG4gICAgICB0aGlzLnByb3BzLmV4cGFuZGVkICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyB0aGlzLnByb3BzLmV4cGFuZGVkXG4gICAgICAgIDogdGhpcy5zdGF0ZS5leHBhbmRlZDtcblxuICAgIHJldHVybiAoXG4gICAgICA8Vmlldz5cbiAgICAgICAgPFRvdWNoYWJsZVJpcHBsZVxuICAgICAgICAgIHN0eWxlPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVdfVxuICAgICAgICAgIG9uUHJlc3M9e3RoaXMuX2hhbmRsZVByZXNzfVxuICAgICAgICAgIGFjY2Vzc2liaWxpdHlUcmFpdHM9XCJidXR0b25cIlxuICAgICAgICAgIGFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgID5cbiAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJvd30gcG9pbnRlckV2ZW50cz1cIm5vbmVcIj5cbiAgICAgICAgICAgIHtsZWZ0XG4gICAgICAgICAgICAgID8gbGVmdCh7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogZXhwYW5kZWQgPyB0aGVtZS5jb2xvcnMucHJpbWFyeSA6IGRlc2NyaXB0aW9uQ29sb3IsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMuaXRlbSwgc3R5bGVzLmNvbnRlbnRdfT5cbiAgICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgICBudW1iZXJPZkxpbmVzPXsxfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICBzdHlsZXMudGl0bGUsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBleHBhbmRlZCA/IHRoZW1lLmNvbG9ycy5wcmltYXJ5IDogdGl0bGVDb2xvcixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aXRsZVN0eWxlLFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAge2Rlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZMaW5lcz17Mn1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBkZXNjcmlwdGlvbkNvbG9yLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblN0eWxlLFxuICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMuaXRlbSwgZGVzY3JpcHRpb24gJiYgc3R5bGVzLm11bHRpbGluZV19PlxuICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgIHNvdXJjZT17ZXhwYW5kZWQgPyAna2V5Ym9hcmQtYXJyb3ctdXAnIDogJ2tleWJvYXJkLWFycm93LWRvd24nfVxuICAgICAgICAgICAgICAgIGNvbG9yPXt0aXRsZUNvbG9yfVxuICAgICAgICAgICAgICAgIHNpemU9ezI0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9Ub3VjaGFibGVSaXBwbGU+XG4gICAgICAgIHtleHBhbmRlZFxuICAgICAgICAgID8gUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsZWZ0ICYmXG4gICAgICAgICAgICAgICAgUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpICYmXG4gICAgICAgICAgICAgICAgIWNoaWxkLnByb3BzLmxlZnQgJiZcbiAgICAgICAgICAgICAgICAhY2hpbGQucHJvcHMucmlnaHRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgICAgICAgICAgc3R5bGU6IFtzdHlsZXMuY2hpbGQsIGNoaWxkLnByb3BzLnN0eWxlXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBudWxsfVxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBjb250YWluZXI6IHtcbiAgICBwYWRkaW5nOiA4LFxuICB9LFxuICByb3c6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbiAgbXVsdGlsaW5lOiB7XG4gICAgaGVpZ2h0OiA0MCxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgZm9udFNpemU6IDE2LFxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIGZvbnRTaXplOiAxNCxcbiAgfSxcbiAgaXRlbToge1xuICAgIG1hcmdpbjogOCxcbiAgfSxcbiAgY2hpbGQ6IHtcbiAgICBwYWRkaW5nTGVmdDogNjQsXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBmbGV4OiAxLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVGhlbWUoTGlzdEFjY29yZGlvbik7XG4iXX0=