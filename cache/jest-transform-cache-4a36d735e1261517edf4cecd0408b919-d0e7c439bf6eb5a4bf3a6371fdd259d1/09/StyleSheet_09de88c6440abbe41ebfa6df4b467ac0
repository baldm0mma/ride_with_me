329d3e8bfdf1605eed2598a5964f12e3
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var PixelRatio = require("../Utilities/PixelRatio");

var ReactNativeStyleAttributes = require("../Components/View/ReactNativeStyleAttributes");

var StyleSheetValidation = require("./StyleSheetValidation");

var flatten = require("./flattenStyle");

var hairlineWidth = PixelRatio.roundToNearestPixel(0.4);

if (hairlineWidth === 0) {
  hairlineWidth = 1 / PixelRatio.get();
}

var absoluteFill = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
};

if (__DEV__) {
  Object.freeze(absoluteFill);
}

module.exports = {
  hairlineWidth: hairlineWidth,
  absoluteFill: absoluteFill,
  absoluteFillObject: absoluteFill,
  compose: function compose(style1, style2) {
    if (style1 != null && style2 != null) {
      return [style1, style2];
    } else {
      return style1 != null ? style1 : style2;
    }
  },
  flatten: flatten,
  setStyleAttributePreprocessor: function setStyleAttributePreprocessor(property, process) {
    var value;

    if (ReactNativeStyleAttributes[property] === true) {
      value = {};
    } else if (typeof ReactNativeStyleAttributes[property] === 'object') {
      value = ReactNativeStyleAttributes[property];
    } else {
      console.error(property + " is not a valid style attribute");
      return;
    }

    if (__DEV__ && typeof value.process === 'function') {
      console.warn("Overwriting " + property + " style attribute preprocessor");
    }

    ReactNativeStyleAttributes[property] = _objectSpread({}, value, {
      process: process
    });
  },
  create: function create(obj) {
    if (__DEV__) {
      for (var _key in obj) {
        StyleSheetValidation.validateStyle(_key, obj);

        if (obj[_key]) {
          Object.freeze(obj[_key]);
        }
      }
    }

    return obj;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0eWxlU2hlZXQuanMiXSwibmFtZXMiOlsiUGl4ZWxSYXRpbyIsInJlcXVpcmUiLCJSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyIsIlN0eWxlU2hlZXRWYWxpZGF0aW9uIiwiZmxhdHRlbiIsImhhaXJsaW5lV2lkdGgiLCJyb3VuZFRvTmVhcmVzdFBpeGVsIiwiZ2V0IiwiYWJzb2x1dGVGaWxsIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJfX0RFVl9fIiwiT2JqZWN0IiwiZnJlZXplIiwibW9kdWxlIiwiZXhwb3J0cyIsImFic29sdXRlRmlsbE9iamVjdCIsImNvbXBvc2UiLCJzdHlsZTEiLCJzdHlsZTIiLCJzZXRTdHlsZUF0dHJpYnV0ZVByZXByb2Nlc3NvciIsInByb3BlcnR5IiwicHJvY2VzcyIsInZhbHVlIiwiY29uc29sZSIsImVycm9yIiwid2FybiIsImNyZWF0ZSIsIm9iaiIsImtleSIsInZhbGlkYXRlU3R5bGUiXSwibWFwcGluZ3MiOiJBQVNBOzs7Ozs7Ozs7O0FBRUEsSUFBTUEsVUFBVSxHQUFHQyxPQUFPLDJCQUExQjs7QUFDQSxJQUFNQywwQkFBMEIsR0FBR0QsT0FBTyxpREFBMUM7O0FBQ0EsSUFBTUUsb0JBQW9CLEdBQUdGLE9BQU8sMEJBQXBDOztBQUVBLElBQU1HLE9BQU8sR0FBR0gsT0FBTyxrQkFBdkI7O0FBMElBLElBQUlJLGFBQWEsR0FBR0wsVUFBVSxDQUFDTSxtQkFBWCxDQUErQixHQUEvQixDQUFwQjs7QUFDQSxJQUFJRCxhQUFhLEtBQUssQ0FBdEIsRUFBeUI7QUFDdkJBLEVBQUFBLGFBQWEsR0FBRyxJQUFJTCxVQUFVLENBQUNPLEdBQVgsRUFBcEI7QUFDRDs7QUFFRCxJQUFNQyxZQUFZLEdBQUc7QUFDbkJDLEVBQUFBLFFBQVEsRUFBRSxVQURTO0FBRW5CQyxFQUFBQSxJQUFJLEVBQUUsQ0FGYTtBQUduQkMsRUFBQUEsS0FBSyxFQUFFLENBSFk7QUFJbkJDLEVBQUFBLEdBQUcsRUFBRSxDQUpjO0FBS25CQyxFQUFBQSxNQUFNLEVBQUU7QUFMVyxDQUFyQjs7QUFPQSxJQUFJQyxPQUFKLEVBQWE7QUFDWEMsRUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNSLFlBQWQ7QUFDRDs7QUE4Q0RTLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQW9CZmIsRUFBQUEsYUFBYSxFQUFiQSxhQXBCZTtBQTJCZkcsRUFBQUEsWUFBWSxFQUFHQSxZQTNCQTtBQXlDZlcsRUFBQUEsa0JBQWtCLEVBQUVYLFlBekNMO0FBaURmWSxFQUFBQSxPQWpEZSxtQkFrRGJDLE1BbERhLEVBbURiQyxNQW5EYSxFQW9EVztBQUN4QixRQUFJRCxNQUFNLElBQUksSUFBVixJQUFrQkMsTUFBTSxJQUFJLElBQWhDLEVBQXNDO0FBQ3BDLGFBQVEsQ0FBQ0QsTUFBRCxFQUFTQyxNQUFULENBQVI7QUFDRCxLQUZELE1BRU87QUFDTCxhQUFPRCxNQUFNLElBQUksSUFBVixHQUFpQkEsTUFBakIsR0FBMEJDLE1BQWpDO0FBQ0Q7QUFDRixHQTFEYztBQW1HZmxCLEVBQUFBLE9BQU8sRUFBUEEsT0FuR2U7QUE4R2ZtQixFQUFBQSw2QkE5R2UseUNBK0diQyxRQS9HYSxFQWdIYkMsT0FoSGEsRUFpSGI7QUFDQSxRQUFJQyxLQUFKOztBQUVBLFFBQUl4QiwwQkFBMEIsQ0FBQ3NCLFFBQUQsQ0FBMUIsS0FBeUMsSUFBN0MsRUFBbUQ7QUFDakRFLE1BQUFBLEtBQUssR0FBRyxFQUFSO0FBQ0QsS0FGRCxNQUVPLElBQUksT0FBT3hCLDBCQUEwQixDQUFDc0IsUUFBRCxDQUFqQyxLQUFnRCxRQUFwRCxFQUE4RDtBQUNuRUUsTUFBQUEsS0FBSyxHQUFHeEIsMEJBQTBCLENBQUNzQixRQUFELENBQWxDO0FBQ0QsS0FGTSxNQUVBO0FBQ0xHLE1BQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFpQkosUUFBakI7QUFDQTtBQUNEOztBQUVELFFBQUlWLE9BQU8sSUFBSSxPQUFPWSxLQUFLLENBQUNELE9BQWIsS0FBeUIsVUFBeEMsRUFBb0Q7QUFDbERFLE1BQUFBLE9BQU8sQ0FBQ0UsSUFBUixrQkFBNEJMLFFBQTVCO0FBQ0Q7O0FBRUR0QixJQUFBQSwwQkFBMEIsQ0FBQ3NCLFFBQUQsQ0FBMUIscUJBQTJDRSxLQUEzQztBQUFrREQsTUFBQUEsT0FBTyxFQUFQQTtBQUFsRDtBQUNELEdBbEljO0FBdUlmSyxFQUFBQSxNQXZJZSxrQkF1SWlCQyxHQXZJakIsRUF1SXNEO0FBSW5FLFFBQUlqQixPQUFKLEVBQWE7QUFDWCxXQUFLLElBQU1rQixJQUFYLElBQWtCRCxHQUFsQixFQUF1QjtBQUNyQjVCLFFBQUFBLG9CQUFvQixDQUFDOEIsYUFBckIsQ0FBbUNELElBQW5DLEVBQXdDRCxHQUF4Qzs7QUFDQSxZQUFJQSxHQUFHLENBQUNDLElBQUQsQ0FBUCxFQUFjO0FBQ1pqQixVQUFBQSxNQUFNLENBQUNDLE1BQVAsQ0FBY2UsR0FBRyxDQUFDQyxJQUFELENBQWpCO0FBQ0Q7QUFDRjtBQUNGOztBQUNELFdBQU9ELEdBQVA7QUFDRDtBQXBKYyxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBQaXhlbFJhdGlvID0gcmVxdWlyZSgnLi4vVXRpbGl0aWVzL1BpeGVsUmF0aW8nKTtcbmNvbnN0IFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9WaWV3L1JlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzJyk7XG5jb25zdCBTdHlsZVNoZWV0VmFsaWRhdGlvbiA9IHJlcXVpcmUoJy4vU3R5bGVTaGVldFZhbGlkYXRpb24nKTtcblxuY29uc3QgZmxhdHRlbiA9IHJlcXVpcmUoJy4vZmxhdHRlblN0eWxlJyk7XG5cbmltcG9ydCB0eXBlIHtcbiAgX19fX1N0eWxlc19JbnRlcm5hbCxcbiAgX19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWwsXG4gIF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcF9JbnRlcm5hbCxcbiAgX19fX1ZpZXdTdHlsZV9JbnRlcm5hbCxcbiAgX19fX1ZpZXdTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVQcm9wX0ludGVybmFsLFxuICBfX19fSW1hZ2VTdHlsZV9JbnRlcm5hbCxcbiAgX19fX0ltYWdlU3R5bGVQcm9wX0ludGVybmFsLFxufSBmcm9tICcuL1N0eWxlU2hlZXRUeXBlcyc7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYSA8Vmlldz4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgVmlldyBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgZm9udFNpemVgLmBcbiAqXG4gKiB0eXBlIFByb3BzID0ge3N0eWxlOiBWaWV3U3R5bGVQcm9wfVxuICogY29uc3QgTXlDb21wb25lbnQgPSAocHJvcHM6IFByb3BzKSA9PiA8VmlldyBzdHlsZT17cHJvcHMuc3R5bGV9IC8+XG4gKi9cbmV4cG9ydCB0eXBlIFZpZXdTdHlsZVByb3AgPSBfX19fVmlld1N0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIHR5cGUgZm9yIGEgcHJvcCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoXG4gKiB0byBhIDxUZXh0PidzIGBzdHlsZWAgcHJvcC4gVGhpcyBlbnN1cmVzIGNhbGwgc2l0ZXMgb2YgdGhlIGNvbXBvbmVudFxuICogY2FuJ3QgcGFzcyBzdHlsZXMgdGhhdCBUZXh0IGRvZXNuJ3Qgc3VwcG9ydCBzdWNoIGFzIGByZXNpemVNb2RlYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogVGV4dFN0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPFRleHQgc3R5bGU9e3Byb3BzLnN0eWxlfSAvPlxuICovXG5leHBvcnQgdHlwZSBUZXh0U3R5bGVQcm9wID0gX19fX1RleHRTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYW4gPEltYWdlPidzIGBzdHlsZWAgcHJvcC4gVGhpcyBlbnN1cmVzIGNhbGwgc2l0ZXMgb2YgdGhlIGNvbXBvbmVudFxuICogY2FuJ3QgcGFzcyBzdHlsZXMgdGhhdCBJbWFnZSBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgZm9udFNpemVgLmBcbiAqXG4gKiB0eXBlIFByb3BzID0ge3N0eWxlOiBJbWFnZVN0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPEltYWdlIHN0eWxlPXtwcm9wcy5zdHlsZX0gLz5cbiAqL1xuZXhwb3J0IHR5cGUgSW1hZ2VTdHlsZVByb3AgPSBfX19fSW1hZ2VTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogV0FSTklORzogWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB1c2luZyB0aGlzIHR5cGUuIFRoaXMgdHlwZVxuICogaXMgc2ltaWxhciB0byB0aGUgb25lcyBhYm92ZSBleGNlcHQgaXQgYWxsb3dzIHN0eWxlcyB0aGF0IGFyZSBhY2NlcHRlZFxuICogYnkgYWxsIG9mIFZpZXcsIFRleHQsIG9yIEltYWdlLiBJdCBpcyB0aGVyZWZvcmUgdmVyeSB1bnNhZmUgdG8gcGFzcyB0aGlzXG4gKiB0aHJvdWdoIHRvIGFuIHVuZGVybHlpbmcgY29tcG9uZW50LiBVc2luZyB0aGlzIGlzIGFsbW9zdCBhbHdheXMgYSBtaXN0YWtlXG4gKiBhbmQgdXNpbmcgb25lIG9mIHRoZSBvdGhlciBtb3JlIHJlc3RyaWN0aXZlIHR5cGVzIGlzIGxpa2VseSB0aGUgcmlnaHQgY2hvaWNlLlxuICovXG5leHBvcnQgdHlwZSBEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcCA9IF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBVdGlsaXR5IHR5cGUgZm9yIGdldHRpbmcgdGhlIHZhbHVlcyBmb3Igc3BlY2lmaWMgc3R5bGUga2V5cy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGlzIGJhZCBiZWNhdXNlIHBvc2l0aW9uIGlzIG1vcmUgcmVzdHJpY3RpdmUgdGhhbiAnc3RyaW5nJzpcbiAqIGBgYFxuICogdHlwZSBQcm9wcyA9IHtwb3NpdGlvbjogc3RyaW5nfTtcbiAqIGBgYFxuICpcbiAqIFlvdSBzaG91bGQgdXNlIHRoZSBmb2xsb3dpbmcgaW5zdGVhZDpcbiAqXG4gKiBgYGBcbiAqIHR5cGUgUHJvcHMgPSB7cG9zaXRpb246IFR5cGVGb3JTdHlsZUtleTwncG9zaXRpb24nPn07XG4gKiBgYGBcbiAqXG4gKiBUaGlzIHdpbGwgY29ycmVjdGx5IGdpdmUgeW91IHRoZSB0eXBlICdhYnNvbHV0ZScgfCAncmVsYXRpdmUnXG4gKi9cbmV4cG9ydCB0eXBlIFR5cGVGb3JTdHlsZUtleTxcbiAgK2tleTogJEtleXM8X19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWw+LFxuPiA9ICRFbGVtZW50VHlwZTxfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZV9JbnRlcm5hbCwga2V5PjtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBWaWV3LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzXG4gKiByZXN1bHRzIGZyb20gU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdFxuICogYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sXG4gKiBjb25zaWRlciB1c2luZyBWaWV3U3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhIFZpZXcgdGhhdCBjYW4ndCBiZSBwcmVjb21wdXRlZCB3aXRoXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgVmlld1N0eWxlID0gX19fX1ZpZXdTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBUZXh0LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzXG4gKiByZXN1bHRzIGZyb20gU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdFxuICogYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sXG4gKiBjb25zaWRlciB1c2luZyBUZXh0U3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhIFRleHQgdGhhdCBjYW4ndCBiZSBwcmVjb21wdXRlZCB3aXRoXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlID0gX19fX1RleHRTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBJbWFnZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgSW1hZ2VTdHlsZVByb3AuXG4gKlxuICogQSByZWFzb25hYmxlIHVzYWdlIG9mIHRoaXMgdHlwZSBpcyBmb3IgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhblxuICogb2JqZWN0IG9mIHN0eWxlcyB0byBwYXNzIHRvIGFuIEltYWdlIHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIEltYWdlU3R5bGUgPSBfX19fSW1hZ2VTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBXQVJOSU5HOiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHVzaW5nIHRoaXMgdHlwZS4gVGhpcyB0eXBlIGlzIGFuIG9iamVjdFxuICogd2l0aCBhbGwgcG9zc2libGUgc3R5bGUga2V5cyBhbmQgdGhlaXIgdmFsdWVzLiBOb3RlIHRoYXQgdGhpcyBpc24ndFxuICogYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXMgcmVzdWx0cyBmcm9tXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90IGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLCBjb25zaWRlciB1c2luZ1xuICogVmlld1N0eWxlUHJvcCwgVGV4dFN0eWxlUHJvcCwgb3IgSW1hZ2VTdHlsZVByb3AuXG4gKlxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGJ5IHZlcnkgY29yZSB1dGlsaXRpZXMgdGhhdCBvcGVyYXRlIG9uIGFuIG9iamVjdFxuICogY29udGFpbmluZyBhbnkgcG9zc2libGUgc3R5bGUgdmFsdWUuXG4gKi9cbmV4cG9ydCB0eXBlIERhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGUgPSBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZV9JbnRlcm5hbDtcblxubGV0IGhhaXJsaW5lV2lkdGggPSBQaXhlbFJhdGlvLnJvdW5kVG9OZWFyZXN0UGl4ZWwoMC40KTtcbmlmIChoYWlybGluZVdpZHRoID09PSAwKSB7XG4gIGhhaXJsaW5lV2lkdGggPSAxIC8gUGl4ZWxSYXRpby5nZXQoKTtcbn1cblxuY29uc3QgYWJzb2x1dGVGaWxsID0ge1xuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgbGVmdDogMCxcbiAgcmlnaHQ6IDAsXG4gIHRvcDogMCxcbiAgYm90dG9tOiAwLFxufTtcbmlmIChfX0RFVl9fKSB7XG4gIE9iamVjdC5mcmVlemUoYWJzb2x1dGVGaWxsKTtcbn1cblxuLyoqXG4gKiBBIFN0eWxlU2hlZXQgaXMgYW4gYWJzdHJhY3Rpb24gc2ltaWxhciB0byBDU1MgU3R5bGVTaGVldHNcbiAqXG4gKiBDcmVhdGUgYSBuZXcgU3R5bGVTaGVldDpcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAqICAgY29udGFpbmVyOiB7XG4gKiAgICAgYm9yZGVyUmFkaXVzOiA0LFxuICogICAgIGJvcmRlcldpZHRoOiAwLjUsXG4gKiAgICAgYm9yZGVyQ29sb3I6ICcjZDZkN2RhJyxcbiAqICAgfSxcbiAqICAgdGl0bGU6IHtcbiAqICAgICBmb250U2l6ZTogMTksXG4gKiAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICogICB9LFxuICogICBhY3RpdmVUaXRsZToge1xuICogICAgIGNvbG9yOiAncmVkJyxcbiAqICAgfSxcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVXNlIGEgU3R5bGVTaGVldDpcbiAqXG4gKiBgYGBcbiAqIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT5cbiAqICAgPFRleHQgc3R5bGU9e1tzdHlsZXMudGl0bGUsIHRoaXMucHJvcHMuaXNBY3RpdmUgJiYgc3R5bGVzLmFjdGl2ZVRpdGxlXX0gLz5cbiAqIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqIENvZGUgcXVhbGl0eTpcbiAqXG4gKiAgLSBCeSBtb3Zpbmcgc3R5bGVzIGF3YXkgZnJvbSB0aGUgcmVuZGVyIGZ1bmN0aW9uLCB5b3UncmUgbWFraW5nIHRoZSBjb2RlXG4gKiAgZWFzaWVyIHRvIHVuZGVyc3RhbmQuXG4gKiAgLSBOYW1pbmcgdGhlIHN0eWxlcyBpcyBhIGdvb2Qgd2F5IHRvIGFkZCBtZWFuaW5nIHRvIHRoZSBsb3cgbGV2ZWwgY29tcG9uZW50c1xuICogIGluIHRoZSByZW5kZXIgZnVuY3Rpb24uXG4gKlxuICogUGVyZm9ybWFuY2U6XG4gKlxuICogIC0gTWFraW5nIGEgc3R5bGVzaGVldCBmcm9tIGEgc3R5bGUgb2JqZWN0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIHJlZmVyIHRvIGl0XG4gKiBieSBJRCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IHN0eWxlIG9iamVjdCBldmVyeSB0aW1lLlxuICogIC0gSXQgYWxzbyBhbGxvd3MgdG8gc2VuZCB0aGUgc3R5bGUgb25seSBvbmNlIHRocm91Z2ggdGhlIGJyaWRnZS4gQWxsXG4gKiBzdWJzZXF1ZW50IHVzZXMgYXJlIGdvaW5nIHRvIHJlZmVyIGFuIGlkIChub3QgaW1wbGVtZW50ZWQgeWV0KS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIGRlZmluZWQgYXMgdGhlIHdpZHRoIG9mIGEgdGhpbiBsaW5lIG9uIHRoZSBwbGF0Zm9ybS4gSXQgY2FuIGJlXG4gICAqIHVzZWQgYXMgdGhlIHRoaWNrbmVzcyBvZiBhIGJvcmRlciBvciBkaXZpc2lvbiBiZXR3ZWVuIHR3byBlbGVtZW50cy5cbiAgICogRXhhbXBsZTpcbiAgICogYGBgXG4gICAqICAge1xuICAgKiAgICAgYm9yZGVyQm90dG9tQ29sb3I6ICcjYmJiJyxcbiAgICogICAgIGJvcmRlckJvdHRvbVdpZHRoOiBTdHlsZVNoZWV0LmhhaXJsaW5lV2lkdGhcbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGlzIGNvbnN0YW50IHdpbGwgYWx3YXlzIGJlIGEgcm91bmQgbnVtYmVyIG9mIHBpeGVscyAoc28gYSBsaW5lIGRlZmluZWRcbiAgICogYnkgaXQgbG9vayBjcmlzcCkgYW5kIHdpbGwgdHJ5IHRvIG1hdGNoIHRoZSBzdGFuZGFyZCB3aWR0aCBvZiBhIHRoaW4gbGluZVxuICAgKiBvbiB0aGUgdW5kZXJseWluZyBwbGF0Zm9ybS4gSG93ZXZlciwgeW91IHNob3VsZCBub3QgcmVseSBvbiBpdCBiZWluZyBhXG4gICAqIGNvbnN0YW50IHNpemUsIGJlY2F1c2Ugb24gZGlmZmVyZW50IHBsYXRmb3JtcyBhbmQgc2NyZWVuIGRlbnNpdGllcyBpdHNcbiAgICogdmFsdWUgbWF5IGJlIGNhbGN1bGF0ZWQgZGlmZmVyZW50bHkuXG4gICAqXG4gICAqIEEgbGluZSB3aXRoIGhhaXJsaW5lIHdpZHRoIG1heSBub3QgYmUgdmlzaWJsZSBpZiB5b3VyIHNpbXVsYXRvciBpcyBkb3duc2NhbGVkLlxuICAgKi9cbiAgaGFpcmxpbmVXaWR0aCxcblxuICAvKipcbiAgICogQSB2ZXJ5IGNvbW1vbiBwYXR0ZXJuIGlzIHRvIGNyZWF0ZSBvdmVybGF5cyB3aXRoIHBvc2l0aW9uIGFic29sdXRlIGFuZCB6ZXJvIHBvc2l0aW9uaW5nLFxuICAgKiBzbyBgYWJzb2x1dGVGaWxsYCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVuY2UgYW5kIHRvIHJlZHVjZSBkdXBsaWNhdGlvbiBvZiB0aGVzZSByZXBlYXRlZFxuICAgKiBzdHlsZXMuXG4gICAqL1xuICBhYnNvbHV0ZUZpbGw6IChhYnNvbHV0ZUZpbGw6IGFueSksIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHVwZGF0ZWQgYWZ0ZXIgd2UgZml4IGRvd25zdHJlYW0gRmxvdyBzaXRlcy5cblxuICAvKipcbiAgICogU29tZXRpbWVzIHlvdSBtYXkgd2FudCBgYWJzb2x1dGVGaWxsYCBidXQgd2l0aCBhIGNvdXBsZSB0d2Vha3MgLSBgYWJzb2x1dGVGaWxsT2JqZWN0YCBjYW4gYmVcbiAgICogdXNlZCB0byBjcmVhdGUgYSBjdXN0b21pemVkIGVudHJ5IGluIGEgYFN0eWxlU2hlZXRgLCBlLmcuOlxuICAgKlxuICAgKiAgIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICogICAgIHdyYXBwZXI6IHtcbiAgICogICAgICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAqICAgICAgIHRvcDogMTAsXG4gICAqICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICogICAgIH0sXG4gICAqICAgfSk7XG4gICAqL1xuICBhYnNvbHV0ZUZpbGxPYmplY3Q6IGFic29sdXRlRmlsbCxcblxuICAvKipcbiAgICogQ29tYmluZXMgdHdvIHN0eWxlcyBzdWNoIHRoYXQgYHN0eWxlMmAgd2lsbCBvdmVycmlkZSBhbnkgc3R5bGVzIGluIGBzdHlsZTFgLlxuICAgKiBJZiBlaXRoZXIgc3R5bGUgaXMgZmFsc3ksIHRoZSBvdGhlciBvbmUgaXMgcmV0dXJuZWQgd2l0aG91dCBhbGxvY2F0aW5nIGFuXG4gICAqIGFycmF5LCBzYXZpbmcgYWxsb2NhdGlvbnMgYW5kIG1haW50YWluaW5nIHJlZmVyZW5jZSBlcXVhbGl0eSBmb3JcbiAgICogUHVyZUNvbXBvbmVudCBjaGVja3MuXG4gICAqL1xuICBjb21wb3NlPFQ6IERhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVQcm9wPihcbiAgICBzdHlsZTE6ID9ULFxuICAgIHN0eWxlMjogP1QsXG4gICk6ID9UIHwgJFJlYWRPbmx5QXJyYXk8VD4ge1xuICAgIGlmIChzdHlsZTEgIT0gbnVsbCAmJiBzdHlsZTIgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIChbc3R5bGUxLCBzdHlsZTJdOiAkUmVhZE9ubHlBcnJheTxUPik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHlsZTEgIT0gbnVsbCA/IHN0eWxlMSA6IHN0eWxlMjtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZsYXR0ZW5zIGFuIGFycmF5IG9mIHN0eWxlIG9iamVjdHMsIGludG8gb25lIGFnZ3JlZ2F0ZWQgc3R5bGUgb2JqZWN0LlxuICAgKiBBbHRlcm5hdGl2ZWx5LCB0aGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBsb29rdXAgSURzLCByZXR1cm5lZCBieVxuICAgKiBTdHlsZVNoZWV0LnJlZ2lzdGVyLlxuICAgKlxuICAgKiA+ICoqTk9URSoqOiBFeGVyY2lzZSBjYXV0aW9uIGFzIGFidXNpbmcgdGhpcyBjYW4gdGF4IHlvdSBpbiB0ZXJtcyBvZlxuICAgKiA+IG9wdGltaXphdGlvbnMuXG4gICAqID5cbiAgICogPiBJRHMgZW5hYmxlIG9wdGltaXphdGlvbnMgdGhyb3VnaCB0aGUgYnJpZGdlIGFuZCBtZW1vcnkgaW4gZ2VuZXJhbC4gUmVmZXJpbmdcbiAgICogPiB0byBzdHlsZSBvYmplY3RzIGRpcmVjdGx5IHdpbGwgZGVwcml2ZSB5b3Ugb2YgdGhlc2Ugb3B0aW1pemF0aW9ucy5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICogYGBgXG4gICAqIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICogICBsaXN0SXRlbToge1xuICAgKiAgICAgZmxleDogMSxcbiAgICogICAgIGZvbnRTaXplOiAxNixcbiAgICogICAgIGNvbG9yOiAnd2hpdGUnXG4gICAqICAgfSxcbiAgICogICBzZWxlY3RlZExpc3RJdGVtOiB7XG4gICAqICAgICBjb2xvcjogJ2dyZWVuJ1xuICAgKiAgIH1cbiAgICogfSk7XG4gICAqXG4gICAqIFN0eWxlU2hlZXQuZmxhdHRlbihbc3R5bGVzLmxpc3RJdGVtLCBzdHlsZXMuc2VsZWN0ZWRMaXN0SXRlbV0pXG4gICAqIC8vIHJldHVybnMgeyBmbGV4OiAxLCBmb250U2l6ZTogMTYsIGNvbG9yOiAnZ3JlZW4nIH1cbiAgICogYGBgXG4gICAqIEFsdGVybmF0aXZlIHVzZTpcbiAgICogYGBgXG4gICAqIFN0eWxlU2hlZXQuZmxhdHRlbihzdHlsZXMubGlzdEl0ZW0pO1xuICAgKiAvLyByZXR1cm4geyBmbGV4OiAxLCBmb250U2l6ZTogMTYsIGNvbG9yOiAnd2hpdGUnIH1cbiAgICogLy8gU2ltcGx5IHN0eWxlcy5saXN0SXRlbSB3b3VsZCByZXR1cm4gaXRzIElEIChudW1iZXIpXG4gICAqIGBgYFxuICAgKiBUaGlzIG1ldGhvZCBpbnRlcm5hbGx5IHVzZXMgYFN0eWxlU2hlZXRSZWdpc3RyeS5nZXRTdHlsZUJ5SUQoc3R5bGUpYFxuICAgKiB0byByZXNvbHZlIHN0eWxlIG9iamVjdHMgcmVwcmVzZW50ZWQgYnkgSURzLiBUaHVzLCBhbiBhcnJheSBvZiBzdHlsZVxuICAgKiBvYmplY3RzIChpbnN0YW5jZXMgb2YgU3R5bGVTaGVldC5jcmVhdGUpLCBhcmUgaW5kaXZpZHVhbGx5IHJlc29sdmVkIHRvLFxuICAgKiB0aGVpciByZXNwZWN0aXZlIG9iamVjdHMsIG1lcmdlZCBhcyBvbmUgYW5kIHRoZW4gcmV0dXJuZWQuIFRoaXMgYWxzbyBleHBsYWluc1xuICAgKiB0aGUgYWx0ZXJuYXRpdmUgdXNlLlxuICAgKi9cbiAgZmxhdHRlbixcblxuICAvKipcbiAgICogV0FSTklORzogRVhQRVJJTUVOVEFMLiBCcmVha2luZyBjaGFuZ2VzIHdpbGwgcHJvYmFibHkgaGFwcGVuIGEgbG90IGFuZCB3aWxsXG4gICAqIG5vdCBiZSByZWxpYWJseSBhbm5vdW5jZWQuIFRoZSB3aG9sZSB0aGluZyBtaWdodCBiZSBkZWxldGVkLCB3aG8ga25vd3M/IFVzZVxuICAgKiBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBTZXRzIGEgZnVuY3Rpb24gdG8gdXNlIHRvIHByZS1wcm9jZXNzIGEgc3R5bGUgcHJvcGVydHkgdmFsdWUuIFRoaXMgaXMgdXNlZFxuICAgKiBpbnRlcm5hbGx5IHRvIHByb2Nlc3MgY29sb3IgYW5kIHRyYW5zZm9ybSB2YWx1ZXMuIFlvdSBzaG91bGQgbm90IHVzZSB0aGlzXG4gICAqIHVubGVzcyB5b3UgcmVhbGx5IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nIGFuZCBoYXZlIGV4aGF1c3RlZCBvdGhlciBvcHRpb25zLlxuICAgKi9cbiAgc2V0U3R5bGVBdHRyaWJ1dGVQcmVwcm9jZXNzb3IoXG4gICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICBwcm9jZXNzOiAobmV4dFByb3A6IG1peGVkKSA9PiBtaXhlZCxcbiAgKSB7XG4gICAgbGV0IHZhbHVlO1xuXG4gICAgaWYgKFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9PT0gdHJ1ZSkge1xuICAgICAgdmFsdWUgPSB7fTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlc1twcm9wZXJ0eV0gPT09ICdvYmplY3QnKSB7XG4gICAgICB2YWx1ZSA9IFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgJHtwcm9wZXJ0eX0gaXMgbm90IGEgdmFsaWQgc3R5bGUgYXR0cmlidXRlYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9fREVWX18gJiYgdHlwZW9mIHZhbHVlLnByb2Nlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybihgT3ZlcndyaXRpbmcgJHtwcm9wZXJ0eX0gc3R5bGUgYXR0cmlidXRlIHByZXByb2Nlc3NvcmApO1xuICAgIH1cblxuICAgIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9IHsuLi52YWx1ZSwgcHJvY2Vzc307XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBTdHlsZVNoZWV0IHN0eWxlIHJlZmVyZW5jZSBmcm9tIHRoZSBnaXZlbiBvYmplY3QuXG4gICAqL1xuICBjcmVhdGU8K1M6IF9fX19TdHlsZXNfSW50ZXJuYWw+KG9iajogUyk6ICRPYmpNYXA8UywgKE9iamVjdCkgPT4gYW55PiB7XG4gICAgLy8gVE9ETzogVGhpcyBzaG91bGQgcmV0dXJuIFMgYXMgdGhlIHJldHVybiB0eXBlLiBCdXQgZmlyc3QsXG4gICAgLy8gd2UgbmVlZCB0byBjb2RlbW9kIGFsbCB0aGUgY2FsbHNpdGVzIHRoYXQgYXJlIHR5cGluZyB0aGlzXG4gICAgLy8gcmV0dXJuIHZhbHVlIGFzIGEgbnVtYmVyIChldmVuIHRob3VnaCBpdCB3YXMgb3BhcXVlKS5cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIFN0eWxlU2hlZXRWYWxpZGF0aW9uLnZhbGlkYXRlU3R5bGUoa2V5LCBvYmopO1xuICAgICAgICBpZiAob2JqW2tleV0pIHtcbiAgICAgICAgICBPYmplY3QuZnJlZXplKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9LFxufTtcbiJdfQ==